import{j as e}from"./index-CvPcnR5S.js";import{r as f}from"./vendor-IDWrQIHz.js";import{u as v}from"./appStore-BPO_w7dw.js";import"./state-MjgzQ4RD.js";function b(){const{tasks:c,taskLoading:m,fetchTasks:o}=v();f.useEffect(()=>{o({sortBy:"deadline",sortDirection:"asc",size:50})},[o]);const t=c.filter(s=>s.deadline&&s.status!=="done").sort((s,a)=>new Date(s.deadline).getTime()-new Date(a.deadline).getTime()),i=s=>Math.ceil((new Date(s).getTime()-Date.now())/(1e3*60*60*24)),h=s=>s<0||s<=1?"urgent":s<=3?"warning":(s<=7,"safe"),u=t.filter(s=>i(s.deadline)<0),g=t.filter(s=>i(s.deadline)===0),p=t.filter(s=>{const a=i(s.deadline);return a>0&&a<=3}),x=t.filter(s=>i(s.deadline)>3),r=(s,a,j)=>a.length?e.jsxs("div",{style:{marginBottom:"var(--space-8)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:600,marginBottom:"var(--space-4)",display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[j," ",s,e.jsx("span",{className:"badge badge-medium",style:{marginLeft:"var(--space-2)"},children:a.length})]}),e.jsx("div",{className:"task-list",children:a.map(n=>{const d=i(n.deadline),l=h(d);return e.jsxs("div",{className:`deadline-item ${l}`,children:[e.jsxs("div",{className:"deadline-countdown",children:[e.jsx("div",{className:"days",style:{color:l==="urgent"?"var(--accent-critical)":l==="warning"?"var(--accent-warning)":"var(--accent-success)"},children:Math.abs(d)}),e.jsx("div",{className:"label",children:d<0?"days ago":d===0?"today":"days left"})]}),e.jsxs("div",{className:"task-info",children:[e.jsx("div",{className:"task-title",children:n.title}),e.jsxs("div",{className:"task-meta",children:[e.jsx("span",{className:`badge badge-${n.priority}`,children:n.priority}),e.jsx("span",{className:`badge badge-${n.status}`,children:n.status}),e.jsxs("span",{children:["ðŸ“… ",new Date(n.deadline).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]})]})]},n.id)})})]}):null;return m&&!c.length?e.jsx("div",{className:"loader",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Deadlines"}),e.jsx("p",{className:"page-subtitle",children:"Stay ahead of your deadlines"})]})}),t.length?e.jsxs(e.Fragment,{children:[r("Overdue",u,"ðŸš¨"),r("Due Today",g,"âš¡"),r("Due Soon (1-3 days)",p,"â³"),r("Upcoming",x,"ðŸ“…")]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"â°"}),e.jsx("h3",{children:"No active deadlines"}),e.jsx("p",{children:"Add deadlines to your tasks to track them here"})]})]})}export{b as Deadlines};
