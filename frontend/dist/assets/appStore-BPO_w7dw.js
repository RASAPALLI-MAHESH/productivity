import{c as h}from"./state-MjgzQ4RD.js";import{c as i}from"./index-CvPcnR5S.js";const b=h((s,e)=>({dashboard:null,dashboardLoading:!1,fetchDashboard:async()=>{s({dashboardLoading:!0});try{const a=await i.get("/dashboard");s({dashboard:a.data.data,dashboardLoading:!1})}catch{s({dashboardLoading:!1})}},tasks:[],taskLoading:!1,totalPages:0,totalElements:0,fetchTasks:async(a={})=>{s({taskLoading:!0});try{const t=await i.get("/tasks",{params:a});s({tasks:t.data.data,totalPages:t.data.totalPages||0,totalElements:t.data.totalElements||0,taskLoading:!1})}catch{s({taskLoading:!1})}},createTask:async a=>{await i.post("/tasks",a),await e().fetchTasks()},updateTask:async(a,t)=>{await i.put(`/tasks/${a}`,t),await e().fetchTasks()},deleteTask:async a=>{const t=e().tasks;s({tasks:t.filter(o=>o.id!==a)});try{await i.delete(`/tasks/${a}`)}catch{s({tasks:t})}},habits:[],habitLoading:!1,habitLogs:{},fetchHabits:async()=>{s({habitLoading:!0});try{const a=await i.get("/habits");s({habits:a.data.data,habitLoading:!1})}catch{s({habitLoading:!1})}},createHabit:async a=>{await i.post("/habits",a),await e().fetchHabits()},updateHabit:async(a,t)=>{await i.put(`/habits/${a}`,t),await e().fetchHabits()},deleteHabit:async a=>{const t=e().habits;s({habits:t.filter(o=>o.id!==a)});try{await i.delete(`/habits/${a}`)}catch{s({habits:t})}},completeHabit:async a=>{await i.post(`/habits/${a}/complete`),await e().fetchHabits()},fetchHabitLogs:async(a,t,o)=>{try{const c=await i.get(`/habits/${a}/logs`,{params:{startDate:t,endDate:o}});s(d=>({habitLogs:{...d.habitLogs,[a]:c.data.data}}))}catch{}}}));export{b as u};
